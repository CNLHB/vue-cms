webpackJsonp([8],{Ouhl:function(e,t){},Quw4:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),n=o.n(r),s=o("NYxO"),a={data:function(){return{buttonLoading:!1,form:{email:"",password:""},rules:{email:[{required:!0,message:"不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},created:function(){this.$Loading.finish()},methods:n()({},Object(s.b)({login:"admin/login",register:"admin/register"}),{handleSubmit:function(){var e=this;this.buttonLoading=!0,this.$refs.loginForm.validate(function(t){if(!t)return e.$Message.error("表单验证失败!"),e.buttonLoading=!1,!1;console.log("start"),e.login(e.form).then(function(t){console.log("done"),e.$ls.set("token","user"),e.$Message.success("登录成功！"),e.$router.push("/")}).catch(function(t){console.log("err"),e.$ls.set("token","suc"),e.$Message.error("登录失败！"),e.buttonLoading=!1})})},handleRegister:function(){var e=this;this.buttonLoading=!0,this.$refs.loginForm.validate(function(t){if(!t)return e.$Message.error("表单验证失败!"),e.buttonLoading=!1,!1;console.log("start"),e.register(e.form).then(function(t){0==t.data.status?(e.$Message.success("用户名为空或已存在！"),e.form.email=null,e.form.password=null):e.$Message.success("注册成功！"),e.buttonLoading=!1}).catch(function(t){console.log("err"),e.$Message.error("注册失败！"),e.buttonLoading=!1})})}})},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[o("div",{staticClass:"login-con"},[o("Card",{attrs:{bordered:!1}},[o("p",{attrs:{slot:"title"},slot:"title"},[o("Icon",{attrs:{type:"log-in"}}),e._v("\n        欢迎登录\n      ")],1),e._v(" "),o("div",{staticClass:"form-con"},[o("Form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules}},[o("FormItem",{attrs:{prop:"email"}},[o("i-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}},[o("span",{attrs:{slot:"prepend"},slot:"prepend"},[o("Icon",{attrs:{size:16,type:"person"}})],1)])],1),e._v(" "),o("FormItem",{attrs:{prop:"password"}},[o("i-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[o("span",{attrs:{slot:"prepend"},slot:"prepend"},[o("Icon",{attrs:{size:14,type:"locked"}})],1)])],1),e._v(" "),o("FormItem",[o("Button",{attrs:{loading:e.buttonLoading,type:"primary",long:""},on:{click:e.handleSubmit}},[e._v("登录")])],1),e._v(" "),o("FormItem",[o("Button",{attrs:{loading:e.buttonLoading,type:"primary",long:""},on:{click:e.handleRegister}},[e._v("注册")])],1)],1)],1)])],1)])},staticRenderFns:[]};var l=o("VU/8")(a,i,!1,function(e){o("Ouhl")},null,null);t.default=l.exports}});
//# sourceMappingURL=8.c59e1ffbe229c876e242.js.map